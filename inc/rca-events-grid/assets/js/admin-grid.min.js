!function($){$(".view-switch a").on("click",function(e){e.preventDefault();var t=$(this).parents(".wrap").data("type"),a=$(this).data("view");$(".content-wrap").removeClass("content-grid content-list content-list-detail").addClass("content-"+a),$(this).addClass("current").siblings().removeClass("current"),navGrid.setView(),Cookies.set("calendar_"+t+"_view",a,{expires:365,path:"/wp-admin"})}),$(".view-switch select").on("change",function(e){e.preventDefault();var t=$(this).parents(".wrap").data("type"),a=$(this).val();Cookies.set("calendar_"+t+"_filter",a,{expires:365,path:"/wp-admin"})}),$(".date-picker-button").on("click",function(e){e.preventDefault(),$("#date-picker").toggle()}),$(document).on("DOMNodeRemoved","#TB_load",function(){$.timepicker.setDefaults($.timepicker.regional.fr),$('[type="time"]').timepicker(),$('input[type="date"]').datepicker({dateFormat:"yy-mm-dd",beforeShow:function(){var e=$("#start_date").datepicker("getDate");if("end_date"==$(this).attr("id")&&e){var t=e;$("#end_date").datepicker("option","minDate",new Date(t))}}})}).on("click",'.wrap[data-can-add-event="1"] .programs-content .programs-day',function(e){if(e.preventDefault(),$(e.target).hasClass("programs-day")){var t=4.16667,a=$(this).height(),n=e.offsetY,i=new Date($(this).data("date")),r=Math.floor(24/a*n),o=i.setHours(r),s=rcaEventGrid.add_event_form_url;s&&($('<article class="programs-entry-temp programs-entry duration-3600 hour-'+r+'-00-00"><div class="program category-autres"></div></div>').css({top:4.16667*r+"%",height:"4.16667%"}).appendTo($(this)),s+="&calendar="+$(this).parents(".wrap").data("type"),s+="&event_date="+o/1e3,console.log(s),tb_show("Ajouter un événement",s))}}),$("body").bind("thickbox:removed",function(){$(".programs-entry-temp").remove()}),$(document).on("click",".event-add-attendee",function(e){e.preventDefault();var t=$(this).siblings(".event-attendees"),a=t.find("li"),n=a.first().clone();n.find('[name^="event"]').each(function(){$(this).attr("name",$(this).attr("name").replace("[0]","["+a.length+"]")),"checkbox"==$(this).attr("type")?($(this).attr("id",$(this).attr("id").replace("-0-","-"+a.length+"-")),$(this).removeAttr("checked")):"hidden"!=$(this).attr("type")&&$(this).val("")}),n.appendTo(t)}).on("change",'[name^="event"]',function(){console.log($(this).attr("name")+" change"),$('#major-publishing-actions [type="submit"]').removeAttr("disabled")}).on("submit",".admin-event-form",function(){var e=this,t=$('.event-attendees [name$="[email]"]'),a=[];return t.removeClass("error"),t.each(function(e){$.inArray($(this).val(),a)>-1&&$(this).addClass("error"),""!==$(this).val()&&(a[e]=$(this).val())}),0===t.filter(".error").length&&($('#major-publishing-actions [type="submit"]').attr("disabled","disabled"),$(e).find("#major-publishing-actions .spinner").css({visibility:"visible"}),e)}),$(document).ready(function(){$("#date-picker").datepicker({showOtherMonths:!0,dateFormat:"yy-mm-dd",onSelect:function(e){document.location=document.location.href+"&date="+e}})})}(jQuery);