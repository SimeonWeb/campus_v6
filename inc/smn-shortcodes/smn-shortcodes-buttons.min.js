!function($){tinymce.create("tinymce.plugins.CustomShortcodes",{init:function(n,t){console.log(n,t),void 0===tinymce.plugins.CustomShortcodes.dialog_html&&$.ajax({url:ajaxurl,type:"POST",dataType:"json",data:{action:"smn_shortcodes_dialog"},success:function(n){tinymce.plugins.CustomShortcodes.dialog_html=n},error:function(n,t,e){console.log(n,t,e)}}),n.addButton("smnButton",{title:"Bouton",cmd:"smnButton",icon:"fa fa-hand-o-up"}),n.addButton("smnButton3d",{title:"Bouton 3d",cmd:"smnButton3d",icon:"fa fa-cube"}),n.addButton("smnInsert",{title:"Encadré",cmd:"smnInsert",icon:"fa fa-sticky-note"}),n.addButton("smnInsert3d",{title:"Encadré 3d",cmd:"smnInsert3d",icon:"fa fa-sticky-note-o"}),n.addButton("smnColumns",{title:"Encadrement des colonnes",cmd:"smnColumns",icon:"fa fa-square-o"}),n.addButton("smnColumn",{title:"Colonne",cmd:"smnColumn",icon:"fa fa-columns"}),n.addButton("smnGrid",{title:"Grille",cmd:"smnGrid",icon:"fa fa-th"}),n.addButton("smnSpacer",{title:"Espace",cmd:"smnSpacer",icon:"fa fa-arrows-v"}),n.addButton("smnBox",{title:"Boite",cmd:"smnBox",icon:"fa fa-square-o"}),n.addButton("smnBlocks",{title:"Encadrement des blocs",cmd:"smnBlocks",icon:"fa fa-square-o"}),n.addButton("smnBlock",{title:"Bloc",cmd:"smnBlock",icon:"fa fa-th-large"}),n.addButton("smnAccordion",{title:"Accordéon",cmd:"smnAccordion",icon:"fa fa-arrows-v"}),n.addCommand("smnButton3d",function(){n.windowManager.open({title:"Bouton 3d",body:[{type:"container",html:tinymce.plugins.CustomShortcodes.dialog_html.button3d}],buttons:[{slug:"smnButton3d_close",text:"Valider",onclick:function(){var t=$(".smn_sc_input"),e=t.length-1,o="",c=n.selection.getContent(),a="";t.each(function(t){var s=$(this);"text"==s.attr("name")?""!==s.val()&&" "!=s.val()&&(c=s.val()):("checkbox"!=s.attr("type")&&""!==s.val()&&" "!=s.val()&&"-1"!=s.val()||"checkbox"==s.attr("type")&&s.is(":checked"))&&(o+=" "+s.attr("name")+'="'+s.val()+'"'),e==t&&(a="[button3d"+o+"]"+c+"[/button3d]",n.execCommand("mceInsertContent",0,a),n.windowManager.close())})}}]})}),n.addCommand("smnInsert3d",function(){n.windowManager.open({title:"Encadré 3d",body:[{type:"container",html:tinymce.plugins.CustomShortcodes.dialog_html.insert3d}],buttons:[{slug:"smnInsert3d_close",text:"Valider",onclick:function(){var t=$(".smn_sc_input"),e=t.length-1,o="",c=n.selection.getContent(),a="";t.each(function(t){var s=$(this);"text"==s.attr("name")?""!==s.val()&&" "!=s.val()&&(c=s.val()):("checkbox"!=s.attr("type")&&""!==s.val()&&" "!=s.val()&&"-1"!=s.val()||"checkbox"==s.attr("type")&&s.is(":checked"))&&(o+=" "+s.attr("name")+'="'+s.val()+'"'),e==t&&(a="[insert3d"+o+"]"+c+"[/insert3d]",n.execCommand("mceInsertContent",0,a),n.windowManager.close())})}}]})}),n.addCommand("smnInsert",function(){n.windowManager.open({title:"Encadré",body:[{type:"container",html:tinymce.plugins.CustomShortcodes.dialog_html.insert}],buttons:[{slug:"smnInsert_close",text:"Valider",onclick:function(){var t=$(".smn_sc_input"),e=t.length-1,o="",c=n.selection.getContent(),a="";t.each(function(t){var s=$(this);"text"==s.attr("name")?""!==s.val()&&" "!=s.val()&&(c=s.val()):("checkbox"!=s.attr("type")&&""!==s.val()&&" "!=s.val()&&"-1"!=s.val()||"checkbox"==s.attr("type")&&s.is(":checked"))&&(o+=" "+s.attr("name")+'="'+s.val()+'"'),e==t&&(a="[insert"+o+"]"+c+"[/insert]",n.execCommand("mceInsertContent",0,a),n.windowManager.close())})}}]})}),n.addCommand("smnColumns",function(){var t="[columns]"+n.selection.getContent()+"[/columns]";n.execCommand("mceInsertContent",0,t)}),n.addCommand("smnColumn",function(){n.windowManager.open({title:"Colonne",body:[{type:"container",html:tinymce.plugins.CustomShortcodes.dialog_html.column}],buttons:[{slug:"smnColumn_close",text:"Valider",onclick:function(){var t=$("#column_size").val(),e="",o="";t&&(e+=' size="'+t+'"'),o="[column"+e+"]"+n.selection.getContent()+"[/column]",n.execCommand("mceInsertContent",0,o),n.windowManager.close()}}]})}),n.addCommand("smnGrid",function(){n.windowManager.open({title:"Grille",body:[{type:"container",html:tinymce.plugins.CustomShortcodes.dialog_html.grid}],buttons:[{slug:"smnGrid_close",text:"Valider",onclick:function(){var t="grid",e="",o="",c="";$('.smn_sc_input[name^="col"]').serializeArray().reduce(function(n,t){return c+=t.value+","},{}),"0,0,0,0,"!=c&&(e+=' col="'+c+'"');var a="";$('.smn_sc_input[name^="pull"]').serializeArray().reduce(function(n,t){return a+=t.value+","},{}),"0,0,0,0,"!=a&&(e+=" "+$(this).attr("name").replace(/\[[a-z]{2}\]/,"")+'="'+a+'"');var s="";$('.smn_sc_input[name^="push"]').serializeArray().reduce(function(n,t){return s+=t.value+","},{}),"0,0,0,0,"!=s&&(e+=' push="'+s+'"');var l="";$('.smn_sc_input[name^="offset"]').serializeArray().reduce(function(n,t){return l+=t.value+","},{}),"0,0,0,0,"!=l&&(e+=' offset="'+l+'"'),$('.smn_sc_input[name="row"]').is(":checked")&&(t+="_row",e=""),"0"!=$('.smn_sc_input[name="valign"]').val()&&(e+=' valign="'+$('.smn_sc_input[name="valign"]').val()+'"'),$('.smn_sc_input[name="class"]').val()&&(e+=' class="'+$('.smn_sc_input[name="class"]').val()+'"'),o="["+t+e+"]"+n.selection.getContent()+"[/"+t+"]",n.execCommand("mceInsertContent",0,o),n.windowManager.close()}}]})}),n.addCommand("smnSpacer",function(){n.windowManager.open({title:"Espace",body:[{type:"container",html:tinymce.plugins.CustomShortcodes.dialog_html.cspacer}],buttons:[{slug:"smnSpacer_close",text:"Valider",onclick:function(){var t="",e="",o="";$('.smn_sc_input[name^="space"]').serializeArray().reduce(function(n,t){return o+=t.value+","},{}),"0,0,0,0,"!=o&&(t+=' space="'+o+'"'),e="[spacer"+t+"/]",n.execCommand("mceInsertContent",0,e),n.windowManager.close()}}]})}),n.addCommand("smnBox",function(){n.windowManager.open({title:"Boite",body:[{type:"container",html:tinymce.plugins.CustomShortcodes.dialog_html.box}],buttons:[{slug:"smnBox_close",text:"Valider",onclick:function(){var t=$(".smn_sc_input"),e=t.length-1,o="",c="",a=n.selection.getContent(),s="";t.each(function(t){var l=$(this);("checkbox"!=l.attr("type")&&""!==l.val()&&" "!=l.val()&&"-1"!=l.val()||"checkbox"==l.attr("type")&&l.is(":checked"))&&(c+=" "+l.attr("name")+'="'+l.val()+'"'),"container"==l.attr("name")&&l.is(":checked")&&(o="_container"),e==t&&(s="[box"+o+c+"]"+a+"[/box"+o+"]",n.execCommand("mceInsertContent",0,s),n.windowManager.close())})}}]})}),n.addCommand("smnBlocks",function(){var t="[blocks]"+n.selection.getContent()+"[/blocks]";n.execCommand("mceInsertContent",0,t)}),n.addCommand("smnBlock",function(){n.windowManager.open({title:"Bloc",body:[{type:"container",html:tinymce.plugins.CustomShortcodes.dialog_html.block}],buttons:[{slug:"smnBlock_close",text:"Valider",onclick:function(){var t=$("#block_link").val(),e=$("#block_target:checked").length,o=$("#block_img").val(),c=$("#block_icon").val(),a=$("#block_size").val(),s=$("#block_align").val(),l=$("#block_ratio").val(),i=$("#block_color").val(),m="",r="";t&&(m+=' link="'+t+'"'),e&&(m+=' target="_blank"'),o&&(m+=' img="'+o+'"'),c&&(m+=' icon="'+c+'"'),s&&(m+=' align="'+s+'"'),a&&(m+=' size="'+a+'"'),l&&(m+=' ratio="'+l+'"'),i&&(m+=' color="'+i+'"'),r="[block"+m+"]"+n.selection.getContent()+"[/block]",n.execCommand("mceInsertContent",0,r),n.windowManager.close()}}]})}),n.addCommand("smnAccordion",function(){n.windowManager.open({title:"Accordéon",body:[{type:"container",html:tinymce.plugins.CustomShortcodes.dialog_html.accordion}],buttons:[{slug:"smnAccordion_close",text:"Valider",onclick:function(){var t=$("#block_title_attr").val(),e=$("#block_selected").val(),o="",c="";t&&(o+=' title_attr="'+t+'"'),e&&(o+=' selected="'+e+'"'),c="[accordion"+o+"]"+n.selection.getContent()+"[/accordion]",n.execCommand("mceInsertContent",0,c),n.windowManager.close()}}]})})},createControl:function(n,t){return console.log(n,t),null},getInfo:function(){return{longname:"Custom Shortcodes Buttons",author:"Siméon",authorurl:"http://simeon.web-createur.com",infourl:"http://simeon.web-createur.com",version:"0.1"}}}),tinymce.PluginManager.add("custom_shortcodes",tinymce.plugins.CustomShortcodes)}(jQuery);